!function(s,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r(s.TradingView=s.TradingView||{})}(this,function(s){"use strict";function r(e,t){var o=c({},e);for(var n in t)"object"!=typeof e[n]||null===e[n]||Array.isArray(e[n])?void 0!==t[n]&&(o[n]=t[n]):o[n]=r(e[n],t[n]);return o}function _(){return"1.13 (internal id 99e91cf5 @ 2018-11-16 10:57:41.519597)"}var c=Object.assign||function(e){for(var t,o=arguments,n=1,i=arguments.length;n<i;n++)for(var a in t=o[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},l={mobile:{disabled_features:["left_toolbar","header_widget","timeframes_toolbar","edit_buttons_in_legend","context_menus","control_bar","border_around_the_chart"],enabled_features:[]}},u={width:800,height:500,symbol:"AA",interval:"D",timezone:"Etc/UTC",container_id:"",library_path:"",locale:"en",widgetbar:{details:!1,watchlist:!1,watchlist_settings:{default_symbols:[]}},overrides:{"mainSeriesProperties.showCountdown":!1},studies_overrides:{},brokerConfig:{configFlags:{}},fullscreen:!1,autosize:!1,disabled_features:[],enabled_features:[],debug:!1,logo:{},time_frames:[{text:"5y",resolution:"W"},{text:"1y",resolution:"W"},{text:"6m",resolution:"120"},{text:"3m",resolution:"60"},{text:"1m",resolution:"30"},{text:"5d",resolution:"5"},{text:"1d",resolution:"1"}],client_id:"0",user_id:"0",charts_storage_api_version:"1.0",favorites:{intervals:[],chartTypes:[]}},m=function(){function e(t){if(this._id="tradingview_"+(1048576*(1+Math.random())|0).toString(16).substring(1),this._ready=!1,this._readyHandlers=[],this._onWindowResize=this._autoResizeChart.bind(this),!t.datafeed)throw new Error("Datafeed is not defined");if(this._options=r(u,t),t.preset){var o=l[t.preset];o?(this._options.disabled_features=void 0!==this._options.disabled_features?this._options.disabled_features.concat(o.disabled_features):o.disabled_features,this._options.enabled_features=void 0!==this._options.enabled_features?this._options.enabled_features.concat(o.enabled_features):o.enabled_features):console.warn("Unknown preset: `"+t.preset+"`")}"Dark"===this._options.theme&&void 0===this._options.loading_screen&&(this._options.loading_screen={backgroundColor:"#131722"}),this._create()}return e.prototype.onChartReady=function(t){this._ready?t.call(this):this._readyHandlers.push(t)},e.prototype.onGrayedObjectClicked=function(t){this._innerAPI().onGrayedObjectClicked(t)},e.prototype.onShortcut=function(t,o){this._innerWindow().createShortcutAction(t,o)},e.prototype.subscribe=function(t,o){this._innerAPI().subscribe(t,o)},e.prototype.unsubscribe=function(t,o){this._innerAPI().unsubscribe(t,o)},e.prototype.chart=function(t){return this._innerAPI().chart(t)},e.prototype.setLanguage=function(t){this.remove(),this._options.locale=t,this._create()},e.prototype.setSymbol=function(t,o,n){this._innerAPI().changeSymbol(t,o+"",n)},e.prototype.remove=function(){window.removeEventListener("resize",this._onWindowResize),this._readyHandlers.splice(0,this._readyHandlers.length),delete window[this._id];var t=this._getIFrameElement();t.contentWindow.destroyChart(),t.parentNode&&t.parentNode.removeChild(t)},e.prototype.closePopupsAndDialogs=function(){this._innerAPI().closePopupsAndDialogs()},e.prototype.selectLineTool=function(t){this._innerAPI().selectLineTool(t)},e.prototype.selectedLineTool=function(){return this._innerAPI().selectedLineTool()},e.prototype.save=function(t){this._innerAPI().saveChart(t)},e.prototype.load=function(t,o){this._innerAPI().loadChart({json:t,extendedData:o})},e.prototype.getSavedCharts=function(t){this._innerAPI().getSavedCharts(t)},e.prototype.loadChartFromServer=function(t){this._innerAPI().loadChartFromServer(t)},e.prototype.saveChartToServer=function(t,o,n,i){this._innerAPI().saveChartToServer(t,o,n,i)},e.prototype.removeChartFromServer=function(t,o){this._innerAPI().removeChartFromServer(t,o)},e.prototype.onContextMenu=function(t){this._innerAPI().onContextMenu(t)},e.prototype.createButton=function(t){return this._innerWindow().createButton(t)},e.prototype.showNoticeDialog=function(t){this._innerAPI().showNoticeDialog(t)},e.prototype.showConfirmDialog=function(t){this._innerAPI().showConfirmDialog(t)},e.prototype.showLoadChartDialog=function(){this._innerAPI().showLoadChartDialog()},e.prototype.showSaveAsChartDialog=function(){this._innerAPI().showSaveAsChartDialog()},e.prototype.symbolInterval=function(){return this._innerAPI().getSymbolInterval()},e.prototype.mainSeriesPriceFormatter=function(){return this._innerAPI().mainSeriesPriceFormatter()},e.prototype.getIntervals=function(){return this._innerAPI().getIntervals()},e.prototype.getStudiesList=function(){return this._innerAPI().getStudiesList()},e.prototype.addCustomCSSFile=function(t){this._innerWindow().addCustomCSSFile(t)},e.prototype.applyOverrides=function(t){this._options=r(this._options,{overrides:t}),this._innerWindow().applyOverrides(t)},e.prototype.applyStudiesOverrides=function(t){this._innerWindow().applyStudiesOverrides(t)},e.prototype.watchList=function(){return this._innerAPI().watchlist()},e.prototype.activeChart=function(){return this._innerAPI().activeChart()},e.prototype.chartsCount=function(){return this._innerAPI().chartsCount()},e.prototype.layout=function(){return this._innerAPI().layout()},e.prototype.setLayout=function(t){this._innerAPI().setLayout(t)},e.prototype.changeTheme=function(t){this._innerWindow().changeTheme(t)},e.prototype.takeScreenshot=function(){this._innerAPI().takeScreenshot()},e.prototype.lockAllDrawingTools=function(){return this._innerAPI().lockAllDrawingTools()},e.prototype._getIFrameElement=function(){var t=document.getElementById(this._id);if(null===t)throw new Error("There is no such iframe");return t},e.prototype._innerAPI=function(){return this._getIFrameElement().contentWindow.tradingViewApi},e.prototype._innerWindow=function(){return this._getIFrameElement().contentWindow},e.prototype._autoResizeChart=function(){this._options.fullscreen&&(this._getIFrameElement().style.height=window.innerHeight+"px")},e.prototype._create=function(){var t=this,o=this._render(),n=document.getElementById(this._options.container_id);if(null===n)throw new Error("There is no such element - #"+this._options.container_id);n.innerHTML=o;var i=this._getIFrameElement();(this._options.autosize||this._options.fullscreen)&&(i.style.width="100%",this._options.fullscreen||(i.style.height="100%")),window.addEventListener("resize",this._onWindowResize),this._onWindowResize();var a=function(){i.removeEventListener("load",a,!1),i.contentWindow.widgetReady(function(){t._ready=!0;for(var d=0,h=t._readyHandlers;d<h.length;d++){var y=h[d];try{y.call(t)}catch(g){console.error(g)}}i.contentWindow.initializationFinished()})};i.addEventListener("load",a,!1)},e.prototype._render=function(){var t=window;t[this._id]={datafeed:this._options.datafeed,customFormatters:this._options.customFormatters,brokerFactory:this._options.brokerFactory,overrides:this._options.overrides,studiesOverrides:this._options.studies_overrides,disabledFeatures:this._options.disabled_features,enabledFeatures:this._options.enabled_features,brokerConfig:this._options.brokerConfig,restConfig:this._options.restConfig,favorites:this._options.favorites,logo:this._options.logo,numeric_formatting:this._options.numeric_formatting,rss_news_feed:this._options.rss_news_feed,newsProvider:this._options.news_provider,loadLastChart:this._options.load_last_chart,saveLoadAdapter:this._options.save_load_adapter,loading_screen:this._options.loading_screen,settingsAdapter:this._options.settings_adapter,customIndicatorsUrl:this._options.indicators_file_name},this._options.saved_data&&(t[this._id].chartContent={json:this._options.saved_data});var o=(this._options.library_path||"")+"static/"+this._options.locale+"-tv-chart.99e91cf53749c6852251.html#symbol="+encodeURIComponent(this._options.symbol)+"&interval="+encodeURIComponent(this._options.interval)+(this._options.timeframe?"&timeframe="+encodeURIComponent(this._options.timeframe):"")+(this._options.toolbar_bg?"&toolbarbg="+this._options.toolbar_bg.replace("#",""):"")+(this._options.studies_access?"&studiesAccess="+encodeURIComponent(JSON.stringify(this._options.studies_access)):"")+"&widgetbar="+encodeURIComponent(JSON.stringify(this._options.widgetbar))+(this._options.drawings_access?"&drawingsAccess="+encodeURIComponent(JSON.stringify(this._options.drawings_access)):"")+"&timeFrames="+encodeURIComponent(JSON.stringify(this._options.time_frames))+"&locale="+encodeURIComponent(this._options.locale)+"&uid="+encodeURIComponent(this._id)+"&clientId="+encodeURIComponent(String(this._options.client_id))+"&userId="+encodeURIComponent(String(this._options.user_id))+(this._options.charts_storage_url?"&chartsStorageUrl="+encodeURIComponent(this._options.charts_storage_url):"")+(this._options.charts_storage_api_version?"&chartsStorageVer="+encodeURIComponent(this._options.charts_storage_api_version):"")+(this._options.custom_css_url?"&customCSS="+encodeURIComponent(this._options.custom_css_url):"")+(this._options.auto_save_delay?"&autoSaveDelay="+encodeURIComponent(String(this._options.auto_save_delay)):"")+"&debug="+this._options.debug+(this._options.snapshot_url?"&snapshotUrl="+encodeURIComponent(this._options.snapshot_url):"")+(this._options.timezone?"&timezone="+encodeURIComponent(this._options.timezone):"")+(this._options.study_count_limit?"&studyCountLimit="+encodeURIComponent(String(this._options.study_count_limit)):"")+(this._options.symbol_search_request_delay?"&ssreqdelay="+encodeURIComponent(String(this._options.symbol_search_request_delay)):"")+(this._options.theme?"&theme="+encodeURIComponent(String(this._options.theme)):"");return'<iframe id="'+this._id+'" name="'+this._id+'"  src="'+o+'"'+(this._options.autosize||this._options.fullscreen?"":' width="'+this._options.width+'" height="'+this._options.height+'"')+' frameborder="0" allowTransparency="true" scrolling="no" allowfullscreen style="display:block;"></iframe>'},e}();window.TradingView=window.TradingView||{},window.TradingView.version=_,s.version=_,s.onready=function p(e){window.addEventListener("DOMContentLoaded",e,!1)},s.widget=m,Object.defineProperty(s,"__esModule",{value:!0})});